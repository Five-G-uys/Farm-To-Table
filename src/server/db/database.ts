/* eslint-disable @typescript-eslint/no-var-requires */
const Sequelize = require("sequelize");
import dotenv from 'dotenv';
dotenv.config();

/*
______ __                  ______      ______ __                  ______
___  //_/_____________________  /__    ___  //_/_____________________  /__
__  ,<  __  __ \  __ \  ___/_  //_/    __  ,<  __  __ \  __ \  ___/_  //_/
_  /| | _  / / / /_/ / /__ _  ,<       _  /| | _  / / / /_/ / /__ _  ,<
/_/ |_| /_/ /_/\____/\___/ /_/|_|      /_/ |_| /_/ /_/\____/\___/ /_/|_|

         ________                       _____
         ___  __/____________ _________ __  /___________________
         __  /  _  __ \_  __ `__ \  __ `/  __/  __ \  _ \_  ___/
         _  /   / /_/ /  / / / / / /_/ // /_ / /_/ /  __/(__  )
         /_/    \____//_/ /_/ /_/\__,_/ \__/ \____/\___//____/

         ,            __ \/ __
     /\^/`\          /o \{}/ o\
    | \/   |         \   ()   /
    | |    |          `> /\ <`   ,,,
    \ \    /  @@@@    (o/\/\o)  {{{}}                 _ _
     '\\//'  @@()@@  _ )    (    ~Y~       @@@@     _{ ' }_
       ||     @@@@ _(_)_   wWWWw .oOOo.   @@()@@   { `.!.` }
       ||     ,/  (_)@(_)  (___) OO()OO    @@@@  _ ',_/Y\_,'
       ||  ,\ | /)  (_)\     Y   'OOOO',,,(\|/ _(_)_ {_,_}
   |\  ||  |\\|// vVVVv`|/@@@@    _ \/{{}}}\| (_)@(_)  |  ,,,
   | | ||  | |;,,,(___) |@@()@@ _(_)_| ~Y~ wWWWw(_)\ (\| {{{}}
   | | || / / {{}}} Y  \| @@@@ (_)#(_) \|  (___)   |  \| /~Y~
    \ \||/ /\\|~Y~ \|/  | \ \/  /(_) |/ |/   Y    \|/  |//\|/
   \ `\\//`,.\|/|//.|/\\|/\\|,\|/ //\|/\|.\\\| // \|\\ |/,\|/
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
*/

const { DB_PORT, RDS_URL, DB_NAME, DB_PASSWORD, DB_USERNAME } = process.env;

export const db = new Sequelize(
  `postgres://${DB_USERNAME}:${DB_PASSWORD}@${RDS_URL}:${DB_PORT}/${DB_NAME}`,
  {
    logging: false,
  }
);

db.authenticate()
  .then(() => console.info("CONNECTED TO DATABASE"))
  .catch((err = "err") => console.warn("DB ERROR", err));
